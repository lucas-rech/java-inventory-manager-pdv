CREATE TABLE "product_item"(
    ID BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    NAME VARCHAR(150) NOT NULL,
    DESCRIPTION VARCHAR(500),
    GTIN VARCHAR(14) UNIQUE NOT NULL,
    NCM VARCHAR(8) NOT NULL,
    PRICE DECIMAL(10,2) NOT NULL,
    COST DECIMAL(10,2) NOT NULL,
    CREATED_AT TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    UPDATED_AT TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE "app_user"(
    ID BIGINT GENERATED BY DEFAULT AS IDENTITY  PRIMARY KEY,
    NAME VARCHAR(150) NOT NULL,
    USERNAME VARCHAR(20) NOT NULL,
    PHONE_NUMBER VARCHAR(11) UNIQUE NOT NULL,
    ROLE VARCHAR(20) NOT NULL,
    PASSWORD VARCHAR(255) NOT NULL,
    CREATED_AT TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    UPDATED_AT TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    DELETED BOOLEAN
);

CREATE TABLE "batch"(
    ID BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    BATCH_ID VARCHAR(100) NOT NULL,
    COST DECIMAL(10,2) NOT NULL,
    QUANTITY INT NOT NULL,
    VALIDATION_DATE TIMESTAMP NOT NULL,
    CREATED_AT TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    UPDATED_AT TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    PRODUCT_ID BIGINT NOT NULL,

    CONSTRAINT fk_batch_product_item
        FOREIGN KEY (PRODUCT_ID)
        REFERENCES "product_item"(ID)
);


CREATE TABLE "consumer"(
    ID BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    NAME VARCHAR(150) NOT NULL,
    LAST_NAME VARCHAR(150) NOT NULL,
    EMAIL VARCHAR(255) UNIQUE NOT NULL,
    DOCUMENT VARCHAR(20) UNIQUE NOT NULL,
    PHONE_NUMBER VARCHAR(11) UNIQUE NOT NULL,
    CREATED_AT TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    UPDATED_AT TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP
);

